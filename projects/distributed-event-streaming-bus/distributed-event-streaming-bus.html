<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Distributed Event Streaming Bus #5066</title>
    <link rel="stylesheet" href="distributed-event-streaming-bus.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uuid/9.0.1/uuidv4.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <h1 class="nav-title">Distributed Event Streaming Bus</h1>
            <div class="nav-controls">
                <button id="theme-toggle" class="nav-button">üåô</button>
                <button id="connect-btn" class="nav-button">üîó Connect</button>
                <button id="export-btn" class="nav-button">üì§</button>
            </div>
        </div>
    </nav>

    <div class="container">
        <aside class="sidebar">
            <ul class="sidebar-menu">
                <li><a href="#dashboard" class="sidebar-link active">üìä Dashboard</a></li>
                <li><a href="#producers" class="sidebar-link">üì§ Producers</a></li>
                <li><a href="#consumers" class="sidebar-link">üì• Consumers</a></li>
                <li><a href="#topics" class="sidebar-link">üìã Topics</a></li>
                <li><a href="#partitions" class="sidebar-link">üîÑ Partitions</a></li>
                <li><a href="#monitoring" class="sidebar-link">üìà Monitoring</a></li>
                <li><a href="#message-flow" class="sidebar-link">üåä Message Flow</a></li>
                <li><a href="#settings" class="sidebar-link">‚öôÔ∏è Settings</a></li>
            </ul>
        </aside>

        <main class="main-content">
            <section id="dashboard" class="section active">
                <h2>Event Streaming Dashboard</h2>
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3>System Overview</h3>
                        <div class="metrics-grid">
                            <div class="metric-item">
                                <span class="metric-label">Active Brokers:</span>
                                <span class="metric-value" id="active-brokers">0</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Total Topics:</span>
                                <span class="metric-value" id="total-topics">0</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Active Producers:</span>
                                <span class="metric-value" id="active-producers">0</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Active Consumers:</span>
                                <span class="metric-value" id="active-consumers">0</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Messages/sec:</span>
                                <span class="metric-value" id="messages-per-second">0</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Throughput:</span>
                                <span class="metric-value" id="throughput">0 MB/s</span>
                            </div>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <h3>Cluster Health</h3>
                        <div class="health-indicators">
                            <div class="health-item">
                                <span class="health-label">Cluster Status:</span>
                                <span class="health-value" id="cluster-status">Disconnected</span>
                            </div>
                            <div class="health-item">
                                <span class="health-label">Leader Election:</span>
                                <span class="health-value" id="leader-election">N/A</span>
                            </div>
                            <div class="health-item">
                                <span class="health-label">Replication Lag:</span>
                                <span class="health-value" id="replication-lag">0ms</span>
                            </div>
                            <div class="health-item">
                                <span class="health-label">ISR Shrink Rate:</span>
                                <span class="health-value" id="isr-shrink-rate">0</span>
                            </div>
                        </div>
                        <canvas id="health-chart"></canvas>
                    </div>
                    <div class="dashboard-card">
                        <h3>Message Flow</h3>
                        <canvas id="message-flow-chart"></canvas>
                    </div>
                    <div class="dashboard-card">
                        <h3>Recent Activity</h3>
                        <div class="activity-log" id="activity-log">
                            <!-- Activity items will be populated here -->
                        </div>
                    </div>
                </div>
            </section>

            <section id="producers" class="section">
                <h2>Event Producers</h2>
                <div class="producer-controls">
                    <button id="add-producer" class="primary-btn">‚ûï Add Producer</button>
                    <button id="start-all-producers" class="secondary-btn">‚ñ∂Ô∏è Start All</button>
                    <button id="stop-all-producers" class="secondary-btn">‚èπÔ∏è Stop All</button>
                    <button id="export-producers" class="secondary-btn">üì§ Export Config</button>
                </div>
                <div class="producers-grid" id="producers-grid">
                    <!-- Producer cards will be populated here -->
                </div>
            </section>

            <section id="consumers" class="section">
                <h2>Event Consumers</h2>
                <div class="consumer-controls">
                    <button id="add-consumer" class="primary-btn">‚ûï Add Consumer</button>
                    <button id="start-all-consumers" class="secondary-btn">‚ñ∂Ô∏è Start All</button>
                    <button id="stop-all-consumers" class="secondary-btn">‚èπÔ∏è Stop All</button>
                    <button id="export-consumers" class="secondary-btn">üì§ Export Config</button>
                </div>
                <div class="consumers-grid" id="consumers-grid">
                    <!-- Consumer cards will be populated here -->
                </div>
            </section>

            <section id="topics" class="section">
                <h2>Topics Management</h2>
                <div class="topic-controls">
                    <button id="create-topic" class="primary-btn">‚ûï Create Topic</button>
                    <button id="refresh-topics" class="secondary-btn">üîÑ Refresh</button>
                    <button id="export-topics" class="secondary-btn">üì§ Export Topics</button>
                </div>
                <div class="topics-table-container">
                    <table class="topics-table" id="topics-table">
                        <thead>
                            <tr>
                                <th>Topic Name</th>
                                <th>Partitions</th>
                                <th>Replication Factor</th>
                                <th>Messages</th>
                                <th>Size</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="topics-body">
                            <!-- Topic rows will be populated here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="partitions" class="section">
                <h2>Partition Management</h2>
                <div class="partition-controls">
                    <div class="partition-filters">
                        <label for="topic-filter">Filter by Topic:</label>
                        <select id="topic-filter">
                            <option value="all">All Topics</option>
                        </select>
                    </div>
                    <button id="rebalance-partitions" class="primary-btn">‚öñÔ∏è Rebalance</button>
                    <button id="export-partitions" class="secondary-btn">üì§ Export</button>
                </div>
                <div class="partitions-visualization">
                    <div id="partitions-diagram" class="partitions-diagram"></div>
                </div>
                <div class="partitions-table-container">
                    <table class="partitions-table" id="partitions-table">
                        <thead>
                            <tr>
                                <th>Topic</th>
                                <th>Partition</th>
                                <th>Leader</th>
                                <th>Replicas</th>
                                <th>ISR</th>
                                <th>Offset</th>
                                <th>Lag</th>
                            </tr>
                        </thead>
                        <tbody id="partitions-body">
                            <!-- Partition rows will be populated here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="monitoring" class="section">
                <h2>System Monitoring</h2>
                <div class="monitoring-controls">
                    <div class="time-range">
                        <label for="time-range">Time Range:</label>
                        <select id="time-range">
                            <option value="1m">Last Minute</option>
                            <option value="5m">Last 5 Minutes</option>
                            <option value="15m">Last 15 Minutes</option>
                            <option value="1h">Last Hour</option>
                            <option value="6h">Last 6 Hours</option>
                            <option value="24h">Last 24 Hours</option>
                        </select>
                    </div>
                    <button id="refresh-monitoring" class="secondary-btn">üîÑ Refresh</button>
                    <button id="export-metrics" class="secondary-btn">üì§ Export Metrics</button>
                </div>
                <div class="monitoring-grid">
                    <div class="monitoring-card">
                        <h3>Message Throughput</h3>
                        <canvas id="throughput-chart"></canvas>
                    </div>
                    <div class="monitoring-card">
                        <h3>Consumer Lag</h3>
                        <canvas id="lag-chart"></canvas>
                    </div>
                    <div class="monitoring-card">
                        <h3>Broker Performance</h3>
                        <canvas id="broker-performance-chart"></canvas>
                    </div>
                    <div class="monitoring-card">
                        <h3>Error Rate</h3>
                        <canvas id="error-rate-chart"></canvas>
                    </div>
                    <div class="monitoring-card">
                        <h3>Network I/O</h3>
                        <canvas id="network-io-chart"></canvas>
                    </div>
                    <div class="monitoring-card">
                        <h3>Disk Usage</h3>
                        <canvas id="disk-usage-chart"></canvas>
                    </div>
                </div>
            </section>

            <section id="message-flow" class="section">
                <h2>Message Flow Visualization</h2>
                <div class="flow-controls">
                    <div class="flow-options">
                        <label><input type="checkbox" id="show-producers" checked> Show Producers</label>
                        <label><input type="checkbox" id="show-consumers" checked> Show Consumers</label>
                        <label><input type="checkbox" id="show-brokers" checked> Show Brokers</label>
                        <label><input type="checkbox" id="animate-flow" checked> Animate Flow</label>
                    </div>
                    <button id="reset-view" class="secondary-btn">üîÑ Reset View</button>
                    <button id="export-flow" class="secondary-btn">üì§ Export Diagram</button>
                </div>
                <div class="message-flow-container">
                    <div id="message-flow-diagram" class="message-flow-diagram"></div>
                </div>
            </section>

            <section id="settings" class="section">
                <h2>System Settings</h2>
                <div class="settings-grid">
                    <div class="setting-card">
                        <h3>Connection Settings</h3>
                        <div class="setting-group">
                            <label for="bootstrap-servers">Bootstrap Servers:</label>
                            <input type="text" id="bootstrap-servers" placeholder="localhost:9092" value="localhost:9092">
                        </div>
                        <div class="setting-group">
                            <label for="client-id">Client ID:</label>
                            <input type="text" id="client-id" placeholder="event-streaming-bus" value="event-streaming-bus">
                        </div>
                        <div class="setting-group">
                            <label for="connection-timeout">Connection Timeout (ms):</label>
                            <input type="number" id="connection-timeout" min="1000" max="60000" value="10000">
                        </div>
                        <div class="setting-group">
                            <label for="request-timeout">Request Timeout (ms):</label>
                            <input type="number" id="request-timeout" min="1000" max="60000" value="30000">
                        </div>
                    </div>
                    <div class="setting-card">
                        <h3>Producer Settings</h3>
                        <div class="setting-group">
                            <label for="acks">Acks:</label>
                            <select id="acks">
                                <option value="0">0 (No acknowledgment)</option>
                                <option value="1" selected>1 (Leader acknowledgment)</option>
                                <option value="-1">-1 (All replicas)</option>
                            </select>
                        </div>
                        <div class="setting-group">
                            <label for="retries">Retries:</label>
                            <input type="number" id="retries" min="0" max="10" value="3">
                        </div>
                        <div class="setting-group">
                            <label for="batch-size">Batch Size (bytes):</label>
                            <input type="number" id="batch-size" min="1" max="1048576" value="16384">
                        </div>
                        <div class="setting-group">
                            <label for="linger-ms">Linger (ms):</label>
                            <input type="number" id="linger-ms" min="0" max="5000" value="5">
                        </div>
                    </div>
                    <div class="setting-card">
                        <h3>Consumer Settings</h3>
                        <div class="setting-group">
                            <label for="group-id">Group ID:</label>
                            <input type="text" id="group-id" placeholder="consumer-group-1" value="consumer-group-1">
                        </div>
                        <div class="setting-group">
                            <label for="auto-offset-reset">Auto Offset Reset:</label>
                            <select id="auto-offset-reset">
                                <option value="latest" selected>latest</option>
                                <option value="earliest">earliest</option>
                                <option value="none">none</option>
                            </select>
                        </div>
                        <div class="setting-group">
                            <label for="enable-auto-commit">Enable Auto Commit:</label>
                            <input type="checkbox" id="enable-auto-commit" checked>
                        </div>
                        <div class="setting-group">
                            <label for="auto-commit-interval">Auto Commit Interval (ms):</label>
                            <input type="number" id="auto-commit-interval" min="100" max="10000" value="5000">
                        </div>
                    </div>
                    <div class="setting-card">
                        <h3>Monitoring Settings</h3>
                        <div class="setting-group">
                            <label for="metrics-interval">Metrics Collection Interval (ms):</label>
                            <input type="number" id="metrics-interval" min="1000" max="60000" value="5000">
                        </div>
                        <div class="setting-group">
                            <label for="retention-days">Metrics Retention (days):</label>
                            <input type="number" id="retention-days" min="1" max="365" value="7">
                        </div>
                        <div class="setting-group">
                            <label>
                                <input type="checkbox" id="enable-alerts"> Enable Alerts
                            </label>
                        </div>
                        <div class="setting-group">
                            <label for="alert-threshold">Alert Threshold (%):</label>
                            <input type="number" id="alert-threshold" min="1" max="100" value="80">
                        </div>
                    </div>
                    <div class="setting-card">
                        <h3>Data Management</h3>
                        <button id="load-sample-config" class="secondary-btn">Load Sample Config</button>
                        <button id="export-config" class="secondary-btn">Export Configuration</button>
                        <button id="import-config" class="secondary-btn">Import Configuration</button>
                        <input type="file" id="config-file" accept=".json" style="display: none;">
                        <button id="reset-config" class="danger-btn">Reset to Defaults</button>
                        <button id="clear-all-data" class="danger-btn">Clear All Data</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Producer Modal -->
    <div id="producer-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="producer-modal-title">Add Producer</h3>
                <button id="close-producer-modal" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="producer-form">
                    <div class="form-group">
                        <label for="producer-name">Producer Name:</label>
                        <input type="text" id="producer-name" required>
                    </div>
                    <div class="form-group">
                        <label for="producer-topic">Topic:</label>
                        <select id="producer-topic" required>
                            <!-- Topics will be populated here -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="producer-rate">Message Rate (msg/sec):</label>
                        <input type="number" id="producer-rate" min="1" max="10000" value="10">
                    </div>
                    <div class="form-group">
                        <label for="producer-payload-size">Payload Size (bytes):</label>
                        <input type="number" id="producer-payload-size" min="1" max="1048576" value="1024">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="producer-compression"> Enable Compression
                        </label>
                    </div>
                    <div class="form-actions">
                        <button type="button" id="cancel-producer" class="secondary-btn">Cancel</button>
                        <button type="submit" class="primary-btn">Save Producer</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Consumer Modal -->
    <div id="consumer-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="consumer-modal-title">Add Consumer</h3>
                <button id="close-consumer-modal" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="consumer-form">
                    <div class="form-group">
                        <label for="consumer-name">Consumer Name:</label>
                        <input type="text" id="consumer-name" required>
                    </div>
                    <div class="form-group">
                        <label for="consumer-topic">Topic:</label>
                        <select id="consumer-topic" required>
                            <!-- Topics will be populated here -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="consumer-group">Consumer Group:</label>
                        <input type="text" id="consumer-group" value="default-group">
                    </div>
                    <div class="form-group">
                        <label for="consumer-processing-time">Processing Time (ms):</label>
                        <input type="number" id="consumer-processing-time" min="1" max="10000" value="100">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="consumer-auto-commit"> Auto Commit
                        </label>
                    </div>
                    <div class="form-actions">
                        <button type="button" id="cancel-consumer" class="secondary-btn">Cancel</button>
                        <button type="submit" class="primary-btn">Save Consumer</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Topic Modal -->
    <div id="topic-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create Topic</h3>
                <button id="close-topic-modal" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="topic-form">
                    <div class="form-group">
                        <label for="topic-name">Topic Name:</label>
                        <input type="text" id="topic-name" required>
                    </div>
                    <div class="form-group">
                        <label for="topic-partitions">Number of Partitions:</label>
                        <input type="number" id="topic-partitions" min="1" max="100" value="3" required>
                    </div>
                    <div class="form-group">
                        <label for="topic-replication">Replication Factor:</label>
                        <input type="number" id="topic-replication" min="1" max="10" value="1" required>
                    </div>
                    <div class="form-group">
                        <label for="topic-retention">Retention Period (hours):</label>
                        <input type="number" id="topic-retention" min="1" max="8760" value="168" required>
                    </div>
                    <div class="form-actions">
                        <button type="button" id="cancel-topic" class="secondary-btn">Cancel</button>
                        <button type="submit" class="primary-btn">Create Topic</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="distributed-event-streaming-bus.js"></script>
</body>
</html>