<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time Semantic Integrity Checker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <h1>üîç Semantic Integrity Checker</h1>
                <p class="subtitle">Real-time validation engine ensuring semantic consistency across conversational outputs</p>
            </div>
            <div class="header-controls">
                <button id="startValidation" class="btn btn-primary">Start Validation</button>
                <button id="clearMemory" class="btn btn-secondary">Clear Memory</button>
                <button id="generateReport" class="btn btn-tertiary">Generate Report</button>
            </div>
        </header>

        <main class="main-content">
            <!-- Integrity Overview Cards -->
            <section class="integrity-overview">
                <div class="overview-card validation">
                    <div class="card-icon">‚úì</div>
                    <div class="card-info">
                        <h3>Validations Run</h3>
                        <p class="card-value" id="validationsRun">0</p>
                        <p class="card-label">Total Checks</p>
                    </div>
                </div>
                <div class="overview-card conflicts">
                    <div class="card-icon">‚ö†Ô∏è</div>
                    <div class="card-info">
                        <h3>Conflicts Detected</h3>
                        <p class="card-value" id="conflictsDetected">0</p>
                        <p class="card-label">Inconsistencies Found</p>
                    </div>
                </div>
                <div class="overview-card integrity">
                    <div class="card-icon">üõ°Ô∏è</div>
                    <div class="card-info">
                        <h3>Integrity Score</h3>
                        <p class="card-value" id="integrityScore">100%</p>
                        <p class="card-label">Semantic Consistency</p>
                    </div>
                </div>
                <div class="overview-card memory">
                    <div class="card-icon">üß†</div>
                    <div class="card-info">
                        <h3>Memory Items</h3>
                        <p class="card-value" id="memoryItems">0</p>
                        <p class="card-label">Statements Stored</p>
                    </div>
                </div>
            </section>

            <!-- Tabs Navigation -->
            <section class="tabs-section">
                <button class="tab-button active" data-tab="dashboard">Dashboard</button>
                <button class="tab-button" data-tab="validation">Validation</button>
                <button class="tab-button" data-tab="memory">Memory</button>
                <button class="tab-button" data-tab="conflicts">Conflicts</button>
                <button class="tab-button" data-tab="reports">Reports</button>
            </section>

            <!-- Dashboard Tab -->
            <section id="dashboard" class="tab-content active">
                <div class="section-title">Real-Time Integrity Monitor</div>

                <div class="monitoring-grid">
                    <div class="monitor-panel">
                        <h3>Validation Status</h3>
                        <div class="status-indicators">
                            <div class="status-item">
                                <span class="label">Engine Status:</span>
                                <span class="value" id="engineStatus">Idle</span>
                            </div>
                            <div class="status-item">
                                <span class="label">Last Check:</span>
                                <span class="value" id="lastCheck">--</span>
                            </div>
                            <div class="status-item">
                                <span class="label">Check Frequency:</span>
                                <span class="value" id="checkFrequency">Real-time</span>
                            </div>
                            <div class="status-item">
                                <span class="label">Response Time:</span>
                                <span class="value" id="responseTime">--ms</span>
                            </div>
                        </div>
                    </div>

                    <div class="monitor-panel">
                        <h3>Semantic Metrics</h3>
                        <div class="semantic-metrics">
                            <div class="metric">
                                <span class="label">Contradiction Rate:</span>
                                <span class="value" id="contradictionRate">0%</span>
                            </div>
                            <div class="metric">
                                <span class="label">Semantic Drift:</span>
                                <span class="value" id="semanticDrift">0%</span>
                            </div>
                            <div class="metric">
                                <span class="label">False Positives:</span>
                                <span class="value" id="falsePositives">0</span>
                            </div>
                            <div class="metric">
                                <span class="label">Accuracy Rate:</span>
                                <span class="value" id="accuracyRate">100%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chart-container">
                    <h3>Integrity Trend (Last Hour)</h3>
                    <canvas id="integrityChart" class="chart-canvas"></canvas>
                </div>

                <div class="recent-activity">
                    <h3>Recent Validation Events</h3>
                    <div id="recentEvents" class="activity-list">
                        <div class="placeholder">No validation events yet</div>
                    </div>
                </div>
            </section>

            <!-- Validation Tab -->
            <section id="validation" class="tab-content">
                <div class="section-title">Semantic Validation</div>

                <div class="validation-controls">
                    <textarea id="inputText" class="validation-input" placeholder="Enter text to validate for semantic consistency..." rows="4"></textarea>
                    <div class="validation-actions">
                        <button class="btn btn-primary" onclick="window.checker.validateText()">Validate Text</button>
                        <button class="btn btn-secondary" onclick="window.checker.clearInput()">Clear</button>
                        <button class="btn btn-tertiary" onclick="window.checker.addToMemory()">Add to Memory</button>
                    </div>
                </div>

                <div id="validationResult" class="validation-result">
                    <div class="placeholder">Enter text above and click "Validate Text" to check semantic integrity</div>
                </div>

                <div class="quick-tests">
                    <h3>Quick Test Cases</h3>
                    <div class="test-buttons">
                        <button class="btn btn-small" onclick="window.checker.runTest('consistent')">Consistent Statement</button>
                        <button class="btn btn-small" onclick="window.checker.runTest('contradictory')">Contradictory Statement</button>
                        <button class="btn btn-small" onclick="window.checker.runTest('ambiguous')">Ambiguous Statement</button>
                        <button class="btn btn-small" onclick="window.checker.runTest('neutral')">Neutral Statement</button>
                    </div>
                </div>
            </section>

            <!-- Memory Tab -->
            <section id="memory" class="tab-content">
                <div class="section-title">Session Memory</div>

                <div class="memory-controls">
                    <div class="memory-stats">
                        <span>Total Statements: <strong id="totalStatements">0</strong></span>
                        <span>Memory Usage: <strong id="memoryUsage">0%</strong></span>
                        <span>Last Updated: <strong id="lastUpdated">--</strong></span>
                    </div>
                    <div class="memory-actions">
                        <button class="btn btn-small" onclick="window.checker.exportMemory()">Export Memory</button>
                        <button class="btn btn-small" onclick="window.checker.importMemory()">Import Memory</button>
                    </div>
                </div>

                <div id="memoryList" class="memory-list">
                    <div class="placeholder">No statements in memory</div>
                </div>
            </section>

            <!-- Conflicts Tab -->
            <section id="conflicts" class="tab-content">
                <div class="section-title">Detected Conflicts</div>

                <div class="conflict-filters">
                    <select id="conflictFilter" class="filter-select">
                        <option value="all">All Conflicts</option>
                        <option value="critical">Critical</option>
                        <option value="high">High Priority</option>
                        <option value="medium">Medium Priority</option>
                        <option value="low">Low Priority</option>
                    </select>
                    <select id="conflictSort" class="filter-select">
                        <option value="severity">Sort by Severity</option>
                        <option value="time">Sort by Time</option>
                        <option value="confidence">Sort by Confidence</option>
                    </select>
                </div>

                <div id="conflictsList" class="conflicts-list">
                    <div class="placeholder">No conflicts detected</div>
                </div>
            </section>

            <!-- Reports Tab -->
            <section id="reports" class="tab-content">
                <div class="section-title">Integrity Reports</div>

                <div class="report-controls">
                    <select id="reportType" class="filter-select">
                        <option value="summary">Summary Report</option>
                        <option value="detailed">Detailed Analysis</option>
                        <option value="trends">Trend Analysis</option>
                        <option value="conflicts">Conflict Report</option>
                    </select>
                    <div class="report-actions">
                        <button class="btn btn-primary" onclick="window.checker.generateReport()">Generate Report</button>
                        <button class="btn btn-secondary" onclick="window.checker.downloadReport()">Download PDF</button>
                    </div>
                </div>

                <div id="reportContent" class="report-content">
                    <div class="placeholder">Select report type and click "Generate Report"</div>
                </div>
            </section>
        </main>

        <footer class="footer">
            <p>Status: <span id="footerStatus">Ready</span> | Validations: <span id="footerValidations">0</span> | Conflicts: <span id="footerConflicts">0</span> | Integrity: <span id="footerIntegrity">100%</span></p>
        </footer>
    </div>

    <!-- Modal for Conflict Details -->
    <div id="conflictModal" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h2 id="conflictTitle">Conflict Details</h2>
            <div id="conflictDetails" class="conflict-details"></div>
            <div class="modal-actions">
                <button class="btn btn-primary" onclick="window.checker.resolveConflict()">Mark as Resolved</button>
                <button class="btn btn-secondary" onclick="window.checker.ignoreConflict()">Ignore</button>
                <button class="btn btn-tertiary" onclick="window.checker.closeModal()">Close</button>
            </div>
        </div>
    </div>

    <script src="checker.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            window.checker = new SemanticIntegrityChecker();
            window.checker.initialize();

            // Button handlers
            document.getElementById('startValidation').addEventListener('click', () => window.checker.toggleValidation());
            document.getElementById('clearMemory').addEventListener('click', () => window.checker.clearMemory());
            document.getElementById('generateReport').addEventListener('click', () => window.checker.generateReport());

            // Tab handlers
            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', (e) => {
                    const tabName = e.target.dataset.tab;

                    document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');

                    document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
                    document.getElementById(tabName).classList.add('active');

                    window.checker.onTabChange(tabName);
                });
            });

            // Filter handlers
            document.getElementById('conflictFilter')?.addEventListener('change', () => window.checker.filterConflicts());
            document.getElementById('conflictSort')?.addEventListener('change', () => window.checker.filterConflicts());

            // Modal handlers
            document.querySelector('.modal-close').addEventListener('click', () => window.checker.closeModal());
            window.addEventListener('click', (e) => {
                if (e.target.id === 'conflictModal') window.checker.closeModal();
            });
        });
    </script>
</body>
</html>